<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yona's Schedule V5</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&display=swap" rel="stylesheet">
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<style>
    :root {
        --bg-color: #FDFCF8;
        --card-bg: rgba(255, 255, 255, 0.90);
        --primary: #B09B88; /* å¥¶èŒ¶æ£• */
        --text: #5A544F;
        --accent: #D4A373;
        --radius: 16px;
    }

    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        background: #eee;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
    }

    /* --- æ§åˆ¶å€ --- */
    .controls {
        background: white;
        padding: 20px;
        border-radius: var(--radius);
        margin-bottom: 20px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        text-align: center;
        position: sticky; /* è®“æ§åˆ¶å€å¸åœ¨é ‚éƒ¨ */
        top: 0;
        z-index: 100;
        max-height: 90vh;
        overflow-y: auto;
    }

    .input-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
    }

    input[type="date"] {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 8px;
        flex: 1;
        font-family: inherit;
    }

    textarea {
        width: 100%;
        padding: 10px;
        border: 2px solid var(--primary);
        border-radius: 12px;
        font-size: 14px;
        color: var(--text);
        resize: none;
        background: #FAFAFA;
        font-family: inherit;
        margin-bottom: 10px;
    }
    textarea:focus { outline: none; background: #FFF; }
    
    /* å°ˆé–€çµ¦å‚™è¨»ç”¨çš„è¼¸å…¥æ¡†æ¨£å¼ */
    .note-input {
        height: 80px;
        border-color: #ddd; /* é¡è‰²æ·¡ä¸€é»å€åˆ† */
        font-size: 13px;
    }

    .btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        transition: 0.2s;
        flex: 1;
    }
    .btn:active { transform: scale(0.95); }
    .btn.secondary { background: #999; }
    .btn.add { background: var(--accent); font-weight: bold; }
    .btn-delete-item {
        background: transparent;
        color: #999;
        border: none;
        cursor: pointer;
        font-size: 16px;
        padding: 0 5px;
    }

    /* --- é è¦½ç•«å¸ƒ --- */
    #capture-area {
        width: 375px;
        min-height: 600px;
        background-color: var(--bg-color);
        background-size: cover;
        background-position: center;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px 25px;
    }

    .overlay {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(253, 252, 248, 0.88);
        z-index: 0;
    }

    .content-box {
        position: relative;
        z-index: 1;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1; /* è®“å®ƒæ’é–‹é«˜åº¦ */
    }

    h1 {
        font-family: serif;
        color: var(--primary);
        font-size: 28px;
        margin-bottom: 5px;
        letter-spacing: 1px;
    }
    
    .subtitle {
        font-size: 12px;
        color: var(--text);
        letter-spacing: 2px;
        margin-bottom: 25px;
        text-transform: uppercase;
        border-bottom: 1px solid var(--primary);
        padding-bottom: 5px;
    }

    /* æ¸…å–®å®¹å™¨ */
    .schedule-list {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 20px;
    }

    /* å–®å€‹æ—¥æœŸé …ç›® */
    .schedule-item {
        background: rgba(255, 255, 255, 0.7);
        border-radius: 12px;
        padding: 12px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-left: 4px solid var(--primary);
        box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }

    .item-date {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        min-width: 80px;
    }
    
    .date-main {
        font-size: 28px; /* å„ªé›…é¢¨å¤§å­—é«” */
        font-weight: 600;
        color: var(--primary);
        font-family: 'Cormorant Garamond', serif; /* å„ªé›…å­—é«” */
        font-style: italic;
    }
    .date-week {
        font-size: 11px;
        color: #999;
        text-transform: uppercase;
        margin-top: 2px;
    }

    .item-times {
        font-size: 20px;
        color: var(--text);
        text-align: right;
        line-height: 1.4;
        font-weight: 600;
        white-space: pre-line;
        font-family: 'Cormorant Garamond', serif; /* å„ªé›…å­—é«” */
    }

    /* --- æ–°å¢çš„å‚™è¨»å€å¡Šæ¨£å¼ --- */
    .note-box {
        width: 100%;
        margin-top: auto; /* æ¨åˆ°åº•éƒ¨ */
        padding: 20px 10px;
        border-top: 1px dashed var(--primary); /* åˆ†éš”ç·š */
        font-size: 13px;
        color: var(--text);
        text-align: center;
        line-height: 1.6;
        white-space: pre-line; /* è®“å‚™è¨»å¯ä»¥æ›è¡Œ */
        display: none; /* é è¨­éš±è—ï¼Œæœ‰å­—æ‰å‡ºç¾ */
    }
    
    /* å‚™è¨»çš„å°æ¨™é¡Œ */
    .note-box::before {
        content: 'NOTES';
        display: block;
        font-size: 10px;
        color: var(--accent);
        letter-spacing: 2px;
        margin-bottom: 5px;
        font-weight: bold;
    }

    .footer-text {
        margin-top: 20px;
        font-size: 10px;
        color: var(--primary);
        letter-spacing: 2px;
        text-align: center;
    }
    
    /* åˆªé™¤æ¨¡å¼åˆ—è¡¨ */
    .controls-list {
        margin-top: 20px;
        text-align: left;
        max-height: 150px;
        overflow-y: auto;
        border-top: 1px solid #eee;
        padding-top: 10px;
    }
    .control-item {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
        padding: 5px 0;
        border-bottom: 1px dashed #eee;
    }

</style>
</head>
<body>

    <div class="controls">
        <h3 style="margin:0 0 15px 0;">ğŸ“… é ç´„æ™‚æ®µæ¸…å–®</h3>
        
        <div class="input-row">
            <input type="date" id="dateInput">
        </div>
        
        <textarea id="timeInput" style="height: 60px;" placeholder="1. è¼¸å…¥æ™‚æ®µ (å¦‚ï¼š13:00ã€15:00)"></textarea>

        <button class="btn add" onclick="addItem()">ï¼‹ æ–°å¢æ—¥æœŸ</button>

        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">

        <h4 style="margin: 0 0 10px 0; font-size: 14px; color: var(--text);">ğŸ“ æ·»åŠ å‚™è¨» (é¡¯ç¤ºåœ¨åº•éƒ¨)</h4>
        <textarea id="noteInput" class="note-input" placeholder="ä¾‹å¦‚ï¼š\nâš ï¸ é ç´„ä¿ç•™10åˆ†é˜\nâš ï¸ è«‹å‹¿æ”œä¼´å‰å¾€"></textarea>

        <div style="display:flex; gap:10px; margin-top:10px;">
            <label class="btn secondary">
                ğŸ“· æ›åº•åœ–
                <input type="file" id="bgInput" accept="image/*" style="display: none;">
            </label>
            <button class="btn" onclick="downloadImage()">â¬‡ï¸ ä¸‹è¼‰åœ–ç‰‡</button>
        </div>

        <div class="controls-list" id="controlsList">
            </div>
    </div>

    <div id="capture-area">
        <div class="overlay"></div>
        
        <div class="content-box">
            <h1>Yona's nail studio</h1>
            <div class="subtitle">Available Appointments</div>

            <div class="schedule-list" id="scheduleList">
            </div>

            <div id="noteDisplay" class="note-box"></div>

            <div class="footer-text">RESERVATION ONLY</div>
        </div>
    </div>

<script>
    const dateInput = document.getElementById('dateInput');
    const timeInput = document.getElementById('timeInput');
    const noteInput = document.getElementById('noteInput'); // å‚™è¨»è¼¸å…¥
    const noteDisplay = document.getElementById('noteDisplay'); // å‚™è¨»é¡¯ç¤º
    
    const scheduleList = document.getElementById('scheduleList');
    const controlsList = document.getElementById('controlsList');
    const bgInput = document.getElementById('bgInput');
    const captureArea = document.getElementById('capture-area');

    let appointments = [];

    // åˆå§‹åŒ–æ—¥æœŸé¸å–®ç‚ºä»Šå¤©
    dateInput.valueAsDate = new Date();

    bgInput.addEventListener('change', handleBgUpload);
    
    // ç›£è½å‚™è¨»è¼¸å…¥ï¼Œå³æ™‚æ›´æ–°ç•«é¢
    noteInput.addEventListener('input', function() {
        noteDisplay.textContent = this.value;
        if (this.value.trim() !== "") {
            noteDisplay.style.display = 'block'; // æœ‰å­—å°±é¡¯ç¤º
        } else {
            noteDisplay.style.display = 'none'; // æ²’å­—å°±éš±è—
        }
    });

    function addItem() {
        const dateVal = dateInput.value;
        const timeVal = timeInput.value.trim();

        if (!dateVal || !timeVal) {
            alert("è«‹é¸æ“‡æ—¥æœŸä¸¦è¼¸å…¥æ™‚é–“å–”ï¼");
            return;
        }

        appointments.push({
            date: dateVal,
            times: timeVal
        });

        // æ’åºï¼šç”±è¿‘åˆ°é 
        appointments.sort((a, b) => new Date(a.date) - new Date(b.date));

        timeInput.value = '';
        render();
    }

    function deleteItem(index) {
        appointments.splice(index, 1);
        render();
    }

    function render() {
        scheduleList.innerHTML = '';
        controlsList.innerHTML = '';

        appointments.forEach((item, index) => {
            const dateObj = new Date(item.date);
            const month = dateObj.getMonth() + 1;
            const date = dateObj.getDate();
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const week = days[dateObj.getDay()];

            // åœ–ç‰‡å€å¡ç‰‡
            const card = document.createElement('div');
            card.className = 'schedule-item';
            card.innerHTML = `
                <div class="item-date">
                    <span class="date-main">${month}/${date}</span>
                    <span class="date-week">${week}</span>
                </div>
                <div class="item-times">${item.times}</div>
            `;
            scheduleList.appendChild(card);

            // æ§åˆ¶å€åˆ—è¡¨
            const ctrlItem = document.createElement('div');
            ctrlItem.className = 'control-item';
            ctrlItem.innerHTML = `
                <span>${month}/${date} (${week}) - ${item.times.replace(/\n/g, ' ')}</span>
                <button class="btn-delete-item" onclick="deleteItem(${index})">ğŸ—‘ï¸</button>
            `;
            controlsList.appendChild(ctrlItem);
        });
    }

    function handleBgUpload(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                captureArea.style.backgroundImage = `url(${event.target.result})`;
            };
            reader.readAsDataURL(file);
        }
    }

    function downloadImage() {
        const originalHeight = captureArea.style.height;
        captureArea.style.height = 'auto'; 
        
        html2canvas(captureArea, {
            scale: 2,
            backgroundColor: null,
            useCORS: true
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = `yona-schedule.png`;
            link.href = canvas.toDataURL();
            link.click();
            captureArea.style.height = originalHeight;
        });
    }
</script>

</body>
</html>
